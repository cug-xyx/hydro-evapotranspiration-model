cal_q2Td(q = 0.1, Pa = 100)
cal_q2Td(q = 0.01, Pa = 100)
cal_q2Td(q = 0.001, Pa = 100)
cal_q2Td(q = 0.0001, Pa = 100)
devtools::load_all(".")
cal_q2Td(q = 0.0001, Pa = 100)
d = fread('data/raw/JRA55_SITE_50136.csv')
d %>% summary()
devtools::load_all(".")
d %>% summary()
cal_q2Td(q = 0.0001, Pa = 100)
1e-15
1e-15 %>% as.numeric()
1e-1
1e-2
1e-5
1e-8
devtools::load_all(".")
cal_q2Td(q = 0.0001, Pa = 100)
devtools::load_all(".")
cal_q2Td(q = 0.0001, Pa = 100)
devtools::load_all(".")
cal_q2Td(q = 0.0001, Pa = 100)
devtools::load_all(".")
cal_q2Td(q = 0.0001, Pa = 100)
devtools::load_all(".")
cal_q2Td(q = 0.0001, Pa = 100)
cal_q2Td(q = 0.00001, Pa = 100)
cal_q2Td(q = 0.001, Pa = 100)
ifelse(c(1, 2) < 1, 1, 2)
ifelse(c(1, 2) < 1, next, 1)
ifelse(c(1, 2, 1, 4, 1, 8) < 1, next, 1)
ifelse(c(1, 2, 1, 4, 1, 8) < 4, next, 4)
ifelse(c(1, 2, 1, 4, 1, 8) < 4, , 4)
ifelse(c(1, 2, 1, 4, 1, 8) < 4, NULL, 4)
ifelse(c(1, 2, 1, 4, 1, 8) < 4, 0, 4)
demo = data.frame(a = c(1, 3, 5))
demo
ifelse(demo$a <3, a, 3)
mutate(demo, a = ifelse(a <3, a, 3))
usethis::use_package('tidyverse', type = 'Imports')
usethis::use_package('dplyr', type = 'Imports')
devtools::load_all(".")
# cal_ET_by_CR_model(Ta = Tair, q = q, Td = NULL, Rn = Rn, U2 = U2, Pa = Pa)
cal_gma(Pa = d$Pa)
cal_q2Td(d=d$q, Pa = d$Pa)
cal_q2Td(q=d$q, Pa = d$Pa)
cal_q2Td(q=d$q, Pa = d$Pa) %>% summary()
devtools::check()
cal_ET_by_CR_model(Ta = d$Tair, q = d$q, Td = NULL, Rn = d$Rn, U2 = d$U2, Pa = d$Pa,
Ep = d$PET)
cal_ET_by_CR_model(Ta = d$Tair, q = d$q, Td = NULL, Rn = d$Rn, U2 = d$U2, Pa = d$Pa,
Ep = d$PET, Td = cal_q2Td(d$q))
cal_q2Td(q=d$q, Pa = d$Pa)
cal_ET_by_CR_model
Td = cal_q2Td(d$q)
cal_ET_by_CR_model(Td = Td, Ta = d$Tair, U2 = d$U2, Rn = d$Rn, Ep = d$PET)
devtools::load_all(".")
cal_ET_by_CR_model(Td = Td, Ta = d$Tair, U2 = d$U2, Rn = d$Rn, Ep = d$PET)
devtools::load_all(".")
cal_ET_by_CR_model(Td = 0, Ta = 20, U2 = 4, Rn = 50, Ep = 4)
devtools::load_all(".")
cal_ET_by_CR_model(Td = 0, Ta = 20, U2 = 4, Rn = 50, Ep = 4)
cal_Tws(Rn = 50, Ep = 4, Ta = 20, ea = cal_ea(Tdew = 0))
cal_Tws(Rn = 50, Ep = 4, Ta = 20, q = 0.001
)
cal_ET_by_CR_model(Td = 0, Ta = 20, U2 = 4, Rn = 50, Ep = 4)
cal_ET_by_CR_model(Td = 0, Ta = 20, U2 = 4, Rn = 50, Ep = 5)
cal_ET_by_CR_model(Td = 0, Ta = 20, U2 = 4, Rn = 50, Ep = 3)
cal_ET_by_CR_model(Td = 0, Ta = 20, U2 = 4, Rn = 50, Ep = 2)
cal_ET_by_CR_model(Td = 0, Ta = 20, U2 = 4, Rn = 50, Ep = 1)
cal_ET_by_CR_model(Td = Td, Ta = d$Tair, U2 = d$U2, Rn = d$Rn, Ep = d$PET)
devtools::load_all(".")
?cal_Tws
cal_Tws(Rn = 50, Ep = 5, Ta = 20, ea = 0.3)
cal_Tws(Rn = c(50, 50), Ep = c(5, 5), Ta = c(20, 20), ea = c(0.3, 0.3))
devtools::load_all(".")
cal_Tws(Rn = c(50, 50), Ep = c(5, 5), Ta = c(20, 20), ea = c(0.3, 0.3))
devtools::load_all(".")
cal_Tws(Rn = c(50, 50), Ep = c(5, 5), Ta = c(20, 20), ea = c(0.3, 0.3))
cal_Twb(Td = 0, Ta = 20)
cal_Twb(Td = c(0, 0), Ta = c(20, 20))
devtools::load_all(".")
cal_Tws(Rn = c(50, 50), Ep = c(5, 5), Ta = c(20, 20), ea = c(0.3, 0.3))
devtools::load_all(".")
cal_Tws(Rn = c(50, 50), Ep = c(5, 5), Ta = c(20, 20), ea = c(0.3, 0.3))
y
50*0.0352
cal_Tws(Rn = c(50, 50), Ep = c(1, 1), Ta = c(20, 20), ea = c(0.3, 0.3))
devtools::load_all(".")
cal_Tws(Rn = 50, Ep = 5, Ta = 20, ea = 0.3)
cal_Tws(Rn = c(50, 50), Ep = c(1, 1), Ta = c(20, 20), ea = c(0.3, 0.3))
cal_Tws(Rn = c(50, 50), Ep = c(5, 5), Ta = c(20, 20), ea = c(0.3, 0.3))
devtools::load_all(".")
cal_Tws(Rn = c(50, 50), Ep = c(5, 5), Ta = c(20, 20), ea = c(0.3, 0.3))
?cal_Twb
cal_Twb(c(10, 10), c(20, 20))
cal_Tws(Rn = c(50, 50), Ep = c(5, 5), Ta = c(20, 20), ea = c(0.3, 0.3), Pa = c(100, 100))
cal_gma(Pa = 100)
cal_gma(Pa = c(100, 100))
devtools::load_all(".")
cal_Tws(Rn = c(50, 50), Ep = c(5, 5), Ta = c(20, 20), ea = c(0.3, 0.3), Pa = c(100, 100))
inv
y
Pa
gma
y
inv(y[1])
?cal_Tws
cal_Tws(Rn = 50, Ep = 5, Ta = 20, ea = 0.3)
inv(y)
inv(c(y, y))
devtools::load_all(".")
cal_Tws(Rn = 50, Ep = 5, Ta = 20, ea = 0.3)
devtools::load_all(".")
cal_Tws(Rn = 50, Ep = 5, Ta = 20, ea = 0.3)
devtools::load_all(".")
cal_Tws(Rn = 50, Ep = 5, Ta = 20, ea = 0.3)
cal_Tws(Rn = c(50, 50), Ep = c(5, 5), Ta = c(20, 20), ea = c(0.3, 0.3), Pa = c(100, 100))
devtools::load_all(".")
cal_Tws(Rn = 50, Ep = 5, Ta = 20, ea = 0.3)
cal_Tws(Rn = c(50, 50), Ep = c(5, 5), Ta = c(20, 20), ea = c(0.3, 0.3), Pa = c(100, 100))
devtools::load_all(".")
cal_Tws(Rn = c(50, 50), Ep = c(5, 5), Ta = c(20, 20), ea = c(0.3, 0.3), Pa = c(100, 100))
y
y[1]
inv(y[1])
cal_Tws(Rn = 50, Ep = 5, Ta = 20, ea = 0.3)
y
inv(y)
inv(0.155)
cal_Tws(Rn = c(50, 50), Ep = c(5, 5), Ta = c(20, 20), ea = c(0.3, 0.3)
)
y
y[1]
inv(y[1])
?uniroot
tibble(a = c(1, 2, 3))
tibble(a = c(1, 2, 3)) %>%
mutate(res = fcase(a == 1, 10,
a == 2, 20,
a == 3, 30))
library(hydroTools)
install.packages('hydroTools')
install.packages("hydroTools")
devtools::install_github('rpkgs/hydroTools')
library(hydroTools)
install.packages('rlang')
install.packages("rlang")
install.packages("rlang")
install.packages("rlang")
install.packages("rlang")
install.packages("rlang")
library(hydroTools)
install.packages('rlang')
library(hydroTools)
?ET_CR_Xiao2020
??ET_CR_Xiao2020
devtools::load_all(".")
devtools::load_all(".")
library(data.table)
library(tidyverse)
d = fread('data/raw/JRA55_SITE_50136.csv')
fread('data/raw/JRA55_SITE_50136.csv') %>%
mutate(res = cal_ET_by_CR_model(Ta = Tair, q = q, Td = NULL, Rn = Rn, U2 = U2, Pa = Pa))
fread('data/raw/JRA55_SITE_50136.csv') %>%
drop_na() %>%
mutate(res = cal_ET_by_CR_model(Ta = Tair, q = q, Td = NULL, Rn = Rn, U2 = U2, Pa = Pa))
devtools::check()
devtools::load_all(".")
devtools::check()
save(d, 'data/JRA55_50136.rda')
save(d, file = 'data/JRA55_50136.rda')
devtools::check()
devtools::check()
rm(list = ls())
devtools::check()
devtools::load_all(".")
devtools::check()
devtools::load_all(".")
devtools::check()
devtools::load_all(".")
devtools::document()
devtools::load_all(".")
devtools::check()
devtools::load_all(".")
devtools::check()
devtools::load_all(".")
devtools::check()
devtools::document()
devtools::check()
usethis::use_package('magrittr', type = 'Imports')
?magrittr::`%>%`
%>%
?%>%
usethis::use_package('terra', type = 'Imports')
usethis::use_package('data.table', type = 'Imports')
usethis::use_package('stringr', type = 'Imports')
addTM2tif
addTM2tif(tif_path = 'inst/data/raw/PML_V2_Ec.tif', 'inst/data/raw/PML_V2_Ec.csv')
devtools::load_all(".")
devtools::load_all(".")
addTM2tif(tif_path = 'inst/data/raw/PML_V2_Ec.tif', 'inst/data/raw/PML_V2_Ec.csv')
devtools::load_all(".")
addTM2tif(tif_path = 'inst/data/raw/PML_V2_Ec.tif', 'inst/data/raw/PML_V2_Ec.csv')
devtools::load_all(".")
addTM2tif(tif_path = 'inst/data/raw/PML_V2_Ec.tif', 'inst/data/raw/PML_V2_Ec.csv')
devtools::document()
addTM2tif(tif_path = 'inst/data/raw/PML_V2_Ec.tif', 'inst/data/raw/PML_V2_Ec.csv')
devtools::load_all(".")
addTM2tif(tif_path = 'inst/data/raw/PML_V2_Ec.tif', 'inst/data/raw/PML_V2_Ec.csv')
devtools::document()
devtools::load_all(".")
devtools::check()
devtools::document()
devtools::check()
?addTM2tif
devtools::check()
devtools::check()
utils::globalVariables(".")
devtools::load_all(".")
devtools::check()
devtools::load_all(".")
devtools::load_all(".")
devtools::check()
devtools::load_all(".")
devtools::load_all(".")
devtools::load_all(".")
devtools::load_all(".")
cal_gma()
hydroTools::ET0_Penman48
uniroot(x+1, 0, 100)$roow
uniroot(x+1, 0, 100)$root
uniroot(x+1, c(-100, 100))$root
uniroot(function(x) x+1, c(-100, 100))$root
?uniroot
uniroot(function(x) x+2, c(-100, 100))$root
uniroot(function(x) x+100, c(-100, 100))$root
uniroot(function(x) x+cal_es(20), c(-100, 100))$root
uniroot(function(Twb) gma * Twb + 0.6108 * exp((17.27 * Twb) / (Twb + 237.3)),
c(-100, 100))$root
uniroot(function(Twb) 1 * Twb + 0.6108 * exp((17.27 * Twb) / (Twb + 237.3)),
c(-100, 100))$root
cal_gma
devtools::load_all(".")
cal_gmaï¼ˆ
cal_gma()
uniroot(function(Twb) 0.067 * Twb + 0.6108 * exp((17.27 * Twb) / (Twb + 237.3)),
c(-100, 100))$root
uniroot(function(Twb) 0.067 * Twb + 0.6108 * exp((17.27 * Twb) / (Twb + 237.3)),
c(-100, 100))$root
uniroot(function(Twb, u=1) u+0.067 * Twb + 0.6108 * exp((17.27 * Twb) / (Twb + 237.3)),
c(-100, 100))$root
uniroot(function(Twb, u=1) 0.067 * Twb + 0.6108 * exp((17.27 * Twb) / (Twb + 237.3)) + u,
c(-100, 100))$root
hydroTools::atm
devtools::load_all(".")
VPD2Td(0.5, 20)
devtools::load_all(".")
VPD2Td(0.5, 20)
devtools::load_all(".")
VPD2Td(0.5, 20)
devtools::load_all(".")
VPD2Td(0.5, 20)
cal_Twb <- function(VPD, Ta,
Pa = 101.325,
lambda = 2.45) {
gma = cal_gma(Pa = Pa, lambda = lambda)
Td  = VPD2Td(VPD, Ta)
# solve using the inverse function
# gma * Twb + cal_es(Twb) = cal_es(Td) + gma * Ta
const = cal_es(Td) + gma * Ta
func <- function(Twb, const = const) {
gma * Twb + 0.6108 * exp((17.27 * Twb) / (Twb + 237.3))
}
Twb = uniroot(func, c(-50, 50), const=const)$root
return(Twb)
}
rm(cal_Twb)
devtools::load_all(".")
cal_Twb(0.5, 20)
cal_Twb(0.7, 20)
cal_Twb(0.2, 20)
VPD2Td(0.5, 20)
VPD2Td(0.6, 20)
VPD2Td(0.7, 20)
VPD2Td(0.8, 20)
VPD2Td(0.8, 25)
cal_Twb <- function(VPD, Ta,
Pa = 101.325,
lambda = 2.45) {
gma = cal_gma(Pa = Pa, lambda = lambda)
Td  = VPD2Td(VPD, Ta)
# solve using the inverse function
# gma * Twb + cal_es(Twb) = cal_es(Td) + gma * Ta
const = cal_es(Td) + gma * Ta
func <- function(Twb, const = const, gma=gma) {
gma * Twb + 0.6108 * exp((17.27 * Twb) / (Twb + 237.3))
}
Twb = uniroot(func, c(-50, 50), const=const, gma=gma)$root
return(Twb)
}
rm(cal_Twb)
devtools::load_all(".")
cal_Twb(0.1, 20)
cal_Twb(0.2, 20)
cal_Twb(0.3, 20)
cal_Twb(0.4, 20)
cal_Twb(0.4, 21)
cal_Twb(0.4, 22)
devtools::load_all(".")
cal_Twb(0.1, 20)
cal_Twb(0.2, 20)
cal_Twb(0.5, 20)
cal_Twb(0.9, 20)
cal_Twb(0.99, 20)
cal_Twb(0.99, 15)
cal_Twb(0.99, 10)
devtools::load_all(".")
devtools::load_all(".")
cal_delta(20)
cal_delta(25)
devtools::load_all(".")
devtools::load_all(".")
cal_lambda()
cal_lambda(20)
cal_gma()
cal_gma(Pa = 101, Ta = 20)
cal_delta(20)
cal-es(20)
cal_es(20)
VPD2Td(0.5, 20)
cal-Twb(0.5, 20)
cal_Twb(0.5, 20)
devtools::load_all(".")
cal_Twb(0.5, 20)
cal_Twb(0.5, 20, 101)
cal_Tdry(10)
devtools::load_all(".")
cal_Tdry(10)
cal_Tdry(15)
hydroTools::cal_U2
hydroTools::ET0_Penman48
hydroTools::ET0_eq
1+NULL
?hydroTools::ET0_eq
devtools::load_all(".")
ET_Penman_max(35, 50, 3)
ET_Penman_max(c(35, 40), c(50, 90), c(3, 1))
devtools::load_all(".")
ET_Penman(20, 50, 3, 0.5)
ET_Penman(20, 50, 3, 0.7)
ET_Penman(20, 50, 4, 0.7)
ET_Penman(20, 90, 3, 0.7)
ET_Penman(25, 90, 3, 0.7)
ET_Penman(25, 90, 5, 0.7)
ET_Penman(25, 90, 5, 0.5)
devtools::load_all(".")
ET_PT1972(5, 50)
devtools::load_all(".")
devtools::load_all(".")
ET_PT1972(5, 50)
devtools::load_all(".")
ET_PT1972(5, 50)
ET_PT1972(5, 100)
ET_PT1972(20, 100)
ET_PT1972(20, 100, Ta = 25)
cal_Twb(0.5, 20)
cal_Twb(c(0.5, 0.5), c(20, 20))
uniroot(function(x) x + 1, c(-100, 100))$root
sapply(c(1, 2), FUN = function(xx) {uniroot(function(x) x + xx, c(-100, 100), xx = xx)$root})
sapply(c(1, 2), FUN = function(xx) {uniroot(function(x, xx=xx) x + xx, c(-100, 100), xx = xx)$root})
sapply(tibble(a = 1, b = 2), FUN = print)
apply(tibble(a = c(1, 2), b = c(3, 4)), 1, FUN = print)
apply(tibble(a = c(1, 2), b = c(3, 4)), 1, FUN = function(x) print(x$a))
tibble(a = 1:5) %>% nrow()
tibble(a = 1:5)[1, ]
tibble(a = 1:5)[2, ]
devtools::load_all(".")
cal_Twb(c(0.5, 0.5), c(20, 20))
devtools::load_all(".")
cal_Twb(c(0.5, 0.5), c(20, 20))
devtools::load_all(".")
cal_Twb(c(0.5, 0.5), c(20, 20))
devtools::load_all(".")
VPD2Td(0.5, 20)
VPD2Td(c(0.5, 0.5), c(20, 20))
VPD2Td(c(0.5, 0.5), c(20, 20))
devtools::load_all(".")
VPD2Td(c(0.5, 0.5), c(20, 20))
cal_Twb(c(0.5, 0.5), c(20, 20))
cal_Twb(c(0.5, 0.5), c(20, 21))
cal_Twb(c(0.5, 0.2), c(20, 21))
devtools::load_all(".")
VPD2Td(c(0.5, 0.5), c(20, 20))
VPD2Td(c(0.5, 0.5), c(20, 21))
cal_Twb(c(0.5, 0.2), c(20, 21))
cal_Twb(c(0.5, 0.2), c(20, 25))
cal_Twb(c(0.5, 0.2, 0.1), c(20, 25, 10))
devtools::load_all(".")
cal_Tws(20, 50, 3, 0.5)
cal_Tws(20, 50, 3, 0.5)
devtools::load_all(".")
cal_Tws(20, 50, 3, 0.5)
cal_Tws(20, 80, 3, 0.5)
devtools::load_all(".")
cal_Tws(20, 80, 3, 0.5)
cal_Tws(20, 50, 3, 0.5)
devtools::load_all(".")
cal_Tws(20, 50, 3, 0.5)
cal_Tws(20, 60, 3, 0.5)
cal_Tws(20, 70, 3, 0.5)
cal_Tws(20, 80, 3, 0.5)
devtools::load_all(".")
cal_Tws(20, 80, 3, 0.5)
cal_Tws(20, 50, 3, 0.5)
cal_Tws(20, 50, 2, 0.5)
cal_Tws(20, 40, 2, 0.5)
cal_Tws(10, 40, 2, 0.5)
cal_Tws(10, 40, 2, 0.8)
devtools::load_all(".")
cal_Tws(10, 40, 2, 0.8)
cal_Tws(10, 40, 2, 0.5)
cal_Tws(20, 50, 2, 0.5)
cal_Tws(15, 50, 2, 0.5)
cal_Tws(15, 50, 2, 0.9)
2^2
2**2
devtools::load_all(".")
ET_CR_Ma(20, 50, 2, 0.5)
ET_CR_Ma(20, 80, 2, 0.5)
ET_CR_Ma(20, 60, 2, 0.5)
ET_CR_Ma(30, 60, 2, 0.5)
ET_CR_Ma(30, 60, 2, 0.3)
devtools::load_all(".")
cal_Tws(c(20, 19), Rn = c(50, 90), U2 = c(1, 3), VPD = c(0.5, 0.7))
ab = c(1, 2)
data.frame(ab)
rm(ab)
devtools::load_all(".")
ET_CR_Ma(20, 50, 2, 0.5)
ET_CR_Ma(20, 50, 2, 0.6)
ET_CR_Ma(20, 50, 2, 0.1)
devtools::load_all(".")
ET_CR_Ma(20, 50, 2, 0.1)
devtools::load_all(".")
ET_CR_Ma(20, 50, 2, 0.1)
devtools::load_all(".")
ET_CR_Ma(20, 50, 2, 0.1)
ET_CR_Ma(20, 50, 2, 0.6)
ET_CR_Ma(30, 50, 2, 0.6)
ET_CR_Ma(40, 50, 2, 0.6)
ET_CR_Ma(40, 60, 2, 0.6)
ET_CR_Ma(40, 70, 2, 0.6)
ET_CR_Ma(40, 80, 2, 0.6)
ET_CR_Ma(40, 80, 3, 0.6)
ET_CR_Ma(40, 80, 5, 0.6)
ET_CR_Ma(40, 80, 1, 0.6)
ET_CR_Ma(40, 80, 1, 0.3)
ET_CR_Ma(40, 80, 1, 0.8)
devtools::load_all(".")
ET_CR_Ma(seq(15, 30, 1), c(50, ))
ET_CR_Ma(seq(15, 30, length.out=10), seq(50, 90, length.out=10), seq(1, 6, length.out=10), seq(0.2, 0.8, length.out=10))
devtools::load_all(".")
ET_CR_Ma(seq(15, 30, length.out=10), seq(50, 90, length.out=10), seq(1, 6, length.out=10), seq(0.2, 0.8, length.out=10))
devtools::load_all(".")
ET_CR_Ma(seq(15, 30, length.out=10), seq(50, 90, length.out=10), seq(1, 6, length.out=10), seq(0.2, 0.8, length.out=10))
devtools::load_all(".")
ET_CR_Ma(seq(15, 30, length.out=10), seq(50, 90, length.out=10), seq(1, 6, length.out=10), seq(0.2, 0.8, length.out=10))
devtools::load_all(".")
ET_CR_Ma(seq(15, 30, length.out=10), seq(50, 90, length.out=10), seq(1, 6, length.out=10), seq(0.2, 0.8, length.out=10))
cal_lambda()
devtools::load_all(".")
cal_lambda(20)
cal_lambda(25)
cal_lambda(25:27)
cal_gma()
cal_gma(Pa = 100:103, Ta = 15:19)
cal_gma(Pa = 100:103, Ta = 15:18)
cal_delta(15:20)
cal_es(10:20)
VPD2Td(0.2:0.5, 15:19)
cal_Twb(0.5:0.7, 15:17)
cal_Tdry(5:10)
cal_U2(10, 4)
devtools::load_all(".")
cal_U2(10, 4)
devtools::load_all(".")
cal_U2(10, 4)
ET_PT1972(10, 60)
ET_PT1972(10:15, 60:65)
ET_CR_Ma(10:12, 60:62, 2:2.2, 0.1:0.3)
devtools::document()
devtools::check()
devtools::load_all(".")
devtools::check()
devtools::document()
devtools::document()
devtools::document()
devtools::check()
devtools::document()
devtools::check()
usethis::use_package('ggplot2', type = 'Imports')
devtools::document()
devtools::check()
importFrom("stats", "uniroot")
devtools::document()
devtools::check()
devtools::document()
devtools::document()
devtools::check()
devtools::load_all(".")
